<div id="branch--{{$index}}" class="branch branch--{{$index}}" ng-class="{selected: mjsCtrl.selected_branch === $index, 'under-edit': mjsCtrl.branch_edit_status[$index] || mjsCtrl.branch_rmdialog_status[$index]}">
	<ng-switch on="mjsCtrl.dragging">
		<div ng-switch-when="true" class="branch__drop-area" droppable ondrop="mjsCtrl.assign_item" context="mjsCtrl" branch-name="branch.name">
			<div class="branch__drop-area__border"></div>
			<div class="branch__drop-area__center">
				<div class="branch__drop-area__center__text">Drop to add item to branch</div>
			</div>
		</div>
		<div ng-switch-when="false" style="width: 100%; height: 100%;">
			<div id="branch-head-border-{{$index}}" class="branch__head-border" ng-click="mjsCtrl.select_branch($index)"></div>
			<div class="branch__head" ng-click="mjsCtrl.select_branch($index)">
				<div class="branch__head__name">
					{{branch.name}}
				</div>
			</div>
			<div class="branch__edit" ng-show="mjsCtrl.selected_branch === $index" ng-click="mjsCtrl.toggle_branch_edit($event, $index)">
				<icon position="[-226, -123]"></icon>
			</div>
			<div class="branch__edit-popover" dropdown is-open="mjsCtrl.branch_edit_status[$index]">
				<label for="edit-popover-name-{{$index}}">
					<en>Rename this Family Branch</en>
					<he>שנה את שם הענף</he>
				</label>
				<input id="edit-popover-name-{{$index}}" class="branch__edit-popover__name" ng-model="branch.name" ng-click="mjsCtrl.stopPropagation($event)" alter-mjs-branch>
				<div class="branch__edit-popover__error" ng-show="branch_name_error">
					<en>You alredy have a branch with this name</en>
					<he>כבר קיים ענף עם שם זה</he>
				</div>
			</div>
			<div class="branch__remove" ng-show="mjsCtrl.selected_branch === $index" ng-click="mjsCtrl.toggle_branch_rmdialog($event, $index)">
				<icon position="[-226, -102]"></icon>
			</div>
			<div class="branch__remove-popover" dropdown is-open="mjsCtrl.branch_rmdialog_status[$index]">
				<en>Do you want do delete <strong>{{branch.name}}</strong> family branch?</en>
				<he>האם ברצונך למחוק את ענף המשפחה {{branch.name}}?</he>
				<div class="branch__remove-popover__actions">
					<button class="remove" ng-click="mjsCtrl.remove($event, branch.name)">
						<en>Yes, Delete</en>
						<he>כן, מחק</he>
					</button>
					<button class="cancel">
						<en>Cancel</en>
						<he>ביטול</he>
					</button>
				</div>
			</div>
		</div>
	</ng-switch>
	<div id="branch-content-{{$index}}" class="branch__content" ng-show="mjsCtrl.selected_branch === $index">
		<mjs-assigned 	ng-if="branch.items.familyNames" 
						id="assigned-first-{{$index}}" 
						class="assigned assigned--first" 
						collection-name="familyNames" 
						icon-position="[-81, -266]" 
						plumb-connect to="branch-head-border-{{$index}}"
						container-id="molecules"
						connection-id="familyNames-{{$index}}" 
						delay="1300" 
						connecton="mjsCtrl.selected_branch">
		</mjs-assigned>
		<mjs-assigned 	ng-if="branch.items.places" 
						id="assigned-second-{{$index}}" 
						class="assigned assigned--second" 
						collection-name="places" 
						icon-position="[-79, -192]" 
						plumb-connect to="branch-head-border-{{$index}}" 
						container-id="molecules"
						connection-id="places-{{$index}}" 
						delay="1300" 
						connecton="mjsCtrl.selected_branch">
		</mjs-assigned>
		<mjs-assigned 	ng-if="branch.items.genTreeIndividuals" 
						id="assigned-third-{{$index}}" 
						class="assigned assigned--third" 
						collection-name="genTreeIndividuals" 
						icon-position="[-79, -144]" 
						plumb-connect to="branch-head-border-{{$index}}"
						container-id="molecules" 
						connection-id="genTreeIndividuals-{{$index}}" 
						delay="1300" 
						connecton="mjsCtrl.selected_branch">
		</mjs-assigned>
		<mjs-assigned 	ng-if="branch.items.photoUnits" 
						id="assigned-fourth-{{$index}}" 
						class="assigned assigned--fourth" 
						collection-name="photoUnits" 
						icon-position="[-79, -348]" 
						plumb-connect to="branch-head-border-{{$index}}" 
						container-id="molecules"
						connection-id="photoUnits-{{$index}}" 
						delay="1300" 
						connecton="mjsCtrl.selected_branch">
		</mjs-assigned>
		<mjs-assigned 	ng-if="branch.items.personalities" 
						id="assigned-fifth-{{$index}}" 
						class="assigned assigned--fifth" 
						collection-name="personalities" 
						icon-position="[-79, -348]" 
						plumb-connect to="branch-head-border-{{$index}}" 
						container-id="molecules"
						connection-id="personalities-{{$index}}" 
						delay="1300" 
						connecton="mjsCtrl.selected_branch">
		</mjs-assigned>
		<mjs-assigned 	ng-if="branch.items.movies" 
						id="assigned-sixth-{{$index}}" 
						class="assigned assigned--sixth" 
						collection-name="movies" 
						icon-position="[-79, -348]" 
						plumb-connect to="branch-head-border-{{$index}}" 
						container-id="molecules"
						connection-id="movies-{{$index}}" 
						delay="1300" 
						connecton="mjsCtrl.selected_branch">
		</mjs-assigned>
	</div>
</div>